
<template name="test">
	Testing (no data access, shouldn't lock on collections);
</template>

<template name="glyphsetstable">
	{{#unless currentUser}}
		<div class="alert alert-danger open-create-account" data-toggle="collapse" data-target=".dropdown-menu" aria-expanded="false">
			Login to an account to keep your progress
		</div>
	{{/unless}}
	<table id="glyphsetstable" class="table table-responsive">
		<thead>
			<tr>
				{{#each langs}}
					<th>{{name}}</th>
				{{/each}}
			</tr>
		</thead>
		<tbody>
			{{#if loading}}
				<tr><td>Loading...</td></tr>
			{{else}}
				{{> glyphsetsrows glyphsets=glyphsets}}
			{{/if}}
  	</tbody>
  </table>
	<div class="well well-lg">
		<div class="row text-center">
			<span class="col-xs-10">
				<a class="btn btn-primary btn-block btn-lg checkresults">
					<i class="glyphicon glyphicon-white glyphicon-refresh"></i>
					Test Matches
				</a>
			</span>
			<span class="col-xs-2 text-center"><div>Score</div><div>{{score}}</div></span>
		</div>
	</div>
	<div class="fixed-message"><div>Well Done!</div></div>
</template>

<template name="glyphsetsrows">
	{{#each glyphsets}}
		{{> glyphsetsrow}}
	{{/each}}
</template>

<template name="glyphsetsrow">
	<tr class="glyphsetrow">
		{{#each langs}}
  		<td>
  			<span id="{{key}}{{../_id}}" lang="{{key}}" glyphsetid="{{../_id}}">{{propOfObj key ..}}</span>
  			<!--{{#if equals key 'e'}}
	  		<audio controls="controls">  
			  	<source src="http://translate.google.com/translate_tts?ie=utf-8&amp;tl={{googleLangOf key}}&amp;q={{propOfObj key ..}}" type="audio/mp3" />  
				</audio>
				{{/if}}-->
			</td>
		{{/each}}
	</tr>
</template>

<template name="words">
	<div class="panel panel-default">
		<div class="panel-heading">
			<h3 class="panel-title">Word Strength</h3>
		</div>
		<table class="table">
			<thead>
				<tr>
					<th>Strength</th>
					{{#each langs}}
						<th>{{name}}</th>
					{{/each}}
					<th></th>
				</tr>
			</thead>
			<tbody>
				{{#each this}}
					<tr>
				  	<td>
				  		{{this.e.strength}}
				  	</td>
						{{#each langs}}
				  		<td>
				  			{{#with propOfObj key ..}}
				  				<div>{{this.word}}</div>
				  			{{/with}}
								{{#if detailsVisible ../_id}}
									<div>
						  			{{#with glyphFor key ..}}
						  				{{> glyph this}}
						  			{{/with}}
									</div>
								{{/if}}
				  		</td>
				  	{{/each}}
				  	<td>
				  		<button class="btn btn-info toggle-details">Details</button>
				  	</td>
					</tr>
					<!-- {{#if detailsVisible}}
						<tr>
							<td></td>
							{{#each langs}}
								<td>
					  			{{#with glyphFor key ..}}
					  				{{> glyph this lang=../key}}
					  			{{/with}}
					  		</td>
							{{/each}}
				  		<td></td>
						</tr>
					{{/if}} -->
				{{/each}}
			</tbody>
		</table>
	</div>
</template>

<template name="glyph">
	{{log this}}
	{{#if is_j}}
		{{#each hira}}
			<div>Hira: {{this}}</div>
		{{/each}}
		{{#each kata}}
			<div>Kata: {{this}}</div>
		{{/each}}
	{{/if}}
	{{#if is_k}}
		{{#each ko_h}}
			<div>Hang: {{this}}</div>
		{{/each}}
		{{#each ko_r}}
			<div>Romani: {{this}}</div>
		{{/each}}
	{{/if}}
	{{#if either is_sc is_tc}}
		{{#if isRadical}}
			<div>Is Radical {{isRadical}}</div>
		{{/if}}
		{{#if hasRadical}}
			<div>Radical:{{#each radicalByNumber hasRadical}} {{this}}{{/each}}</div>
		{{/if}}
		{{#each pinyin}}
			<div>Pinyin: {{this}}</div>
		{{/each}}
		{{#each sub}}
			{{#unless equals ../../value this}}
				<div>Sub: {{this}}</div>
			{{/unless}}
		{{/each}}
	{{/if}}
	{{#if values}}
		{{#each values}}
			{{#unless equals ../../value this}}
				<div>{{this}}</div>
			{{/unless}}
		{{/each}}
	{{/if}}
</template>
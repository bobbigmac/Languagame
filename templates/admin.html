<template name="admin">
	{{> registeredUsers}}
	<div class="row">
		{{> availableGlyphsets}}
		{{> possibleGlyphsets}}
	</div>
</template>

<template name="possibleGlyphsets">
	<div class="col-sm-7 column">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h5 class="panel-title">Possible Glyphsets: {{glyphsetCount}}</h5>
			</div>
			<table class="table table-default">
				<thead>
					<tr>
						<th></th>
						<th>P.</th>
						{{#each keysOf googleLangs}}
							<th>
								<span class="visible-sm visible-xs">{{tinyLanguageName this}}</span>
								<span class="hidden-sm hidden-xs">{{shortLanguageName this}}</span>
							</th>
						{{/each}}
						<th>Pro.</th>
					</tr>
				</thead>
				<tbody>
					{{#each glyphsets}}
						<tr>
							<td>
								<button class="btn btn-default btn-sm save-possible-glyphset">
									<i class="glyphicon glyphicon-chevron-left"></i>
								</button>
							</td>
							<td>
								{{this.pop}}
							</td>
							{{#each keysOf googleLangs}}
								{{#if equals this 'e'}}
									<td class="eng-cell" lang="en">
										{{#with propOfObj this ..}}
											{{> englishCell engs=this}}
											{{> englishCell engs=../../ej text='J:'}}
											{{> englishCell engs=../../ec text='C:'}}
											{{> englishCell engs=../../ek text='K:'}}
											{{> englishCell engs=../../ekan text='Kan:'}}
										{{/with}}
									</td>
								{{else}}
									<td lang="{{googleLangOf this}}">{{propOfObj this ..}}</td>
								{{/if}}
							{{/each}}
							<td class="eng-cell">
								{{> pronounceCell langs=this.hira text='H:'}}
								{{> pronounceCell langs=this.kata text='K:'}}
								{{> pronounceCell langs=this.pinyin text='P:'}}
								{{> pronounceCell langs=this.ko_h text='Kh:'}}
								{{> pronounceCell langs=this.ko_r text='Kr:'}}
							</td>
						</tr>
					{{/each}}
				</tbody>
			</table>
		</div>
	</div>
</template>

<template name="englishCell">
	{{#if engs}}
		{{#each engs}}
			<div>
				<a class="btn btn-link save-potential">
					{{#if ../text}}{{../text}} {{/if}}{{this}}
				</a>
			</div>
		{{/each}}
	{{/if}}
</template>

<template name="pronounceCell">
	{{#if langs}}
		{{#each langs}}
			<div>
				{{#if ../text}}{{../text}} {{/if}}{{this}}
			</div>
		{{/each}}
	{{/if}}
</template>

<template name="availableGlyphsets">
	<div class="col-sm-5 column">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h5 class="panel-title">Available Glyphsets: {{glyphsetCount}}</h5>
			</div>
			<table class="table table-default">
				<thead>
					<tr>
						<th></th>
						{{#each keysOf googleLangs}}
							<th>
								<span class="visible-sm visible-xs">{{tinyLanguageName this}}</span>
								<span class="hidden-sm hidden-xs">{{shortLanguageName this}}</span>
							</th>
						{{/each}}
					</tr>
				</thead>
				<tbody>
					{{#each glyphsets}}
						<tr>
							<td>{{this.pop}}</td>
							{{#each keysOf googleLangs}}
								<td lang="{{googleLangOf this}}">{{propOfObj this ..}}</td>
							{{/each}}
						</tr>
					{{/each}}
				</tbody>
			</table>
		</div>
	</div>
</template>

<template name="registeredUsers">
	<div class="row">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h5 class="panel-title">Registered users: {{userNumber}}</h5>
			</div>
			<table class="table table-default">
				<thead>
					<tr>
						<th>Email</th>
						<th>Score</th>
					</tr>
				</thead>
				<tbody>
					{{#each userScores}}
						<tr>
							<td>{{#if profile.name}}{{profile.name}}{{else}}{{#each emails}}{{address}}{{/each}}{{/if}}</td>
							<td>{{profile.score}}</td>
						</tr>
					{{/each}}
				</tbody>
			</table>
		</div>
	</div>
</template>